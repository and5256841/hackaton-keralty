# ğŸ¯ ACTUALIZACIÃ“N: Tareas y HÃ¡bitos Saludables

## âœ… MODIFICACIONES REALIZADAS (en plataforma_integrada.html)

**NO SE CREÃ“ NUEVA PLATAFORMA** - Se modificÃ³ el archivo existente.

---

## ğŸ†• Nuevas Funcionalidades Agregadas

### 1. **HÃ¡bitos Saludables Universales** (TODOS los pacientes)

**UbicaciÃ³n:** Se muestra ANTES de los programas de salud

**8 HÃ¡bitos obligatorios para prevenciÃ³n:**

1. ğŸš­ **No consumo de tabaco** (+15 pts)
2. ğŸ· **Consumo responsable de alcohol** (0 o moderado) (+15 pts)
3. ğŸ§˜ **PrevenciÃ³n de burnout:** Descanso mental (+15 pts)
4. ğŸƒ **Actividad fÃ­sica regular** (150 min/semana) (+15 pts)
5. ğŸ¥— **AlimentaciÃ³n balanceada** (5 porciones frutas/verduras) (+15 pts)
6. ğŸ’§ **HidrataciÃ³n adecuada** (8 vasos agua/dÃ­a) (+15 pts)
7. ğŸ˜´ **SueÃ±o reparador** (7-8 horas) (+15 pts)
8. â¤ï¸ **Bienestar emocional:** ConexiÃ³n social (+15 pts)

**GamificaciÃ³n:**
- Click en checkbox â†’ Marca como completado
- **+15 puntos** por cada hÃ¡bito
- **+2% salud** por cada hÃ¡bito
- Fondo verde cuando estÃ¡ completado
- Total posible: **+120 puntos** y **+16% salud**

---

### 2. **Tareas EspecÃ­ficas por Programa**

**Se muestran SOLO cuando el paciente estÃ¡ inscrito en un programa**

#### Programa de HipertensiÃ³n:
- ğŸ“Š Registrar toma de presiÃ³n arterial (+25 pts)
- ğŸ’Š Confirmar adherencia a medicamentos (+25 pts)
- ğŸ“… Agendar control cardiologÃ­a (+25 pts)

#### Programa de Diabetes:
- ğŸ“Š Registrar glucometrÃ­a diaria (+25 pts)
- ğŸ”¬ Cargar resultados de HbA1c (+25 pts)
- ğŸ”¬ Verificar funciÃ³n renal (+25 pts)
- ğŸ“… Agendar nutriciÃ³n (+25 pts)

#### Programa de Obesidad:
- ğŸƒ Validar ingreso a Bodytech (+25 pts)
- ğŸ“… Agendar nutriciÃ³n (+25 pts)
- ğŸ“… Consulta con deportÃ³logo (+25 pts)
- ğŸ“Š Registrar peso semanal (+25 pts)

#### Programa Cardiovascular:
- ğŸ“… Agendar cita titulaciÃ³n de fÃ¡rmacos (+25 pts)
- ğŸ“š EducaciÃ³n en autocuidado (+25 pts)
- ğŸ“Š Control de presiÃ³n arterial (+25 pts)

#### Programa Prenatal:
- ğŸ“… Agendar control prenatal (+25 pts)
- ğŸ“… Agendar odontologÃ­a (+25 pts)
- ğŸ“š Asistir curso preparaciÃ³n maternidad (+25 pts)
- ğŸ“… Programar visita prenatal con pediatra (Semana 32) (+25 pts)

#### Programa PediÃ¡trico:
- ğŸ›¡ï¸ VacunaciÃ³n al dÃ­a (+25 pts)
- ğŸ“Š Control de crecimiento y desarrollo (+25 pts)
- ğŸƒ Inscribir actividades lÃºdicas (Recre4) (+25 pts)

#### Programa GeriÃ¡trico:
- ğŸ“… Agendar valoraciÃ³n geriÃ¡trica integral (+25 pts)
- ğŸ“… Programar rehabilitaciÃ³n fÃ­sica (+25 pts)
- ğŸ  Confirmar visita mÃ©dica domiciliaria (+25 pts)
- ğŸ“š Taller de estimulaciÃ³n cognitiva (+25 pts)

**GamificaciÃ³n:**
- Click en checkbox â†’ Marca como completada
- **+25 puntos** por cada tarea
- **+1% salud** por cada tarea
- Fondo verde cuando estÃ¡ completada
- CategorÃ­a visual (Monitoreo, Cita, Laboratorio, etc.)

---

### 3. **Objetivos de Salud Personalizados**

**Se muestran DESPUÃ‰S de los programas**

**MarÃ­a GonzÃ¡lez (45 aÃ±os, HipertensiÃ³n + Diabetes + Obesidad):**
- ğŸ¯ Reducir presiÃ³n arterial a 120/80 - **30% progreso**
- ğŸ¯ HbA1c < 7% - **45% progreso**
- ğŸ¯ Perder 5 kg - **20% progreso**

**Carlos GonzÃ¡lez (48 aÃ±os, Colesterol Alto):**
- ğŸ¯ Colesterol LDL < 100 mg/dL - **55% progreso**
- ğŸ¯ Correr 5K sin parar - **70% progreso**

**SofÃ­a GonzÃ¡lez (12 aÃ±os, saludable):**
- ğŸ¯ Actividad fÃ­sica 5 dÃ­as/semana - **86% progreso**
- ğŸ¯ VacunaciÃ³n completa - **100% progreso** ğŸ‰

**Abuela Rosa (78 aÃ±os, HipertensiÃ³n + Artritis):**
- ğŸ¯ Adherencia medicaciÃ³n 100% - **93% progreso**
- ğŸ¯ Caminar 15 min diarios - **80% progreso**

**VisualizaciÃ³n:**
- Barra de progreso animada
- Colores segÃºn progreso:
  - ğŸŸ¢ Verde: 80-100% (cerca de la meta)
  - ğŸŸ¡ Amarillo: 50-79% (en progreso)
  - ğŸ”´ Rojo: 0-49% (necesita esfuerzo)
- Mensaje especial cuando llega al 100%: "ğŸ‰ Â¡Meta alcanzada!"

---

## ğŸ“Š Sistema de Puntos Actualizado

### Puntos por AcciÃ³n:

| AcciÃ³n | Puntos | Impacto Salud |
|--------|--------|---------------|
| **InscripciÃ³n en programa** | +100 pts | - |
| **Tarea de programa** | +25 pts | +1% |
| **HÃ¡bito saludable** | +15 pts | +2% |

### Ejemplo para MarÃ­a:

**Estado inicial:**
- 850 puntos, 65% salud

**Acciones:**
1. Inscribirse en HipertensiÃ³n â†’ **950 pts** (+100)
2. Inscribirse en Diabetes â†’ **1,050 pts** (+100) â†’ **Nivel 4!**
3. Completar "Registrar presiÃ³n" â†’ **1,075 pts** (+25), **66% salud**
4. Completar "Registrar glucometrÃ­a" â†’ **1,100 pts** (+25), **67% salud**
5. Marcar hÃ¡bito "No tabaco" â†’ **1,115 pts** (+15), **69% salud**
6. Marcar hÃ¡bito "HidrataciÃ³n" â†’ **1,130 pts** (+15), **71% salud**

**Resultado final:**
- **1,130 puntos** (de 850 inicial)
- **71% salud** (de 65% inicial)
- **Nivel 4** (subiÃ³ de Nivel 3)

---

## ğŸ® Flujo de Usuario Actualizado

### Pantalla 5: Tamagotchi Detallado (Modificada)

**Orden de visualizaciÃ³n:**

1. **Avatar + EstadÃ­sticas** (sin cambios)
   - Avatar gigante
   - Nombre, edad, ciudad
   - Estado de Ã¡nimo
   - Salud, puntos, nivel

2. **ğŸŒŸ HÃ¡bitos Saludables** â­ NUEVO
   - 8 hÃ¡bitos universales
   - Checkboxes interactivos
   - +15 pts cada uno
   - PrevenciÃ³n de burnout, tabaco, alcohol

3. **ğŸ¯ Objetivos de Salud** â­ NUEVO
   - Metas personalizadas
   - Barras de progreso
   - Colores segÃºn avance

4. **ğŸ“‹ Programas de Salud**
   - Programas recomendados
   - BotÃ³n [+ Inscribir]
   - **Tareas especÃ­ficas** â­ NUEVO (solo si estÃ¡ inscrito)
   - Checkboxes de tareas
   - +25 pts por tarea

---

## ğŸ¯ Ejemplo de Demo Completa

### Caso: MarÃ­a GonzÃ¡lez

**Paso 1: Abrir MarÃ­a desde dashboard**
- Click en tarjeta de MarÃ­a
- Se abre vista Tamagotchi

**Paso 2: HÃ¡bitos Saludables** (Scroll arriba)
- Ver lista de 8 hÃ¡bitos
- MarÃ­a ya tiene 2 marcados (HidrataciÃ³n, SueÃ±o)
- **AcciÃ³n en vivo:** Marcar "ğŸš­ No consumo de tabaco"
  - Antes: 850 pts, 65% salud
  - DespuÃ©s: 865 pts (+15), 67% salud (+2%)
  - Checkbox marca verde

**Paso 3: Objetivos de Salud**
- Ver 3 objetivos con barras de progreso:
  - PresiÃ³n arterial: 30% (amarillo)
  - HbA1c: 45% (amarillo)
  - Perder peso: 20% (rojo)

**Paso 4: Programas de Salud** (Scroll abajo)
- Ver 4 programas recomendados
- Click **[+ Inscribir]** en "HipertensiÃ³n"
  - Antes: 865 pts
  - DespuÃ©s: 965 pts (+100), BotÃ³n cambia a [âœ“ Inscrito]
  - **Aparecen 3 tareas del programa** â­

**Paso 5: Completar Tarea del Programa**
- Ver lista de tareas de HipertensiÃ³n:
  - [ ] Registrar toma de presiÃ³n arterial (ğŸ“Š Monitoreo)
  - [ ] Confirmar adherencia a medicamentos (ğŸ’Š MedicaciÃ³n)
  - [ ] Agendar control cardiologÃ­a (ğŸ“… Cita)
- **AcciÃ³n en vivo:** Marcar primera tarea
  - Antes: 965 pts, 67% salud
  - DespuÃ©s: 990 pts (+25), 68% salud (+1%)
  - Checkbox marca verde, fondo verde

**Resultado final de la demo:**
- Puntos: 850 â†’ 990 (+140 pts)
- Salud: 65% â†’ 68% (+3%)
- HÃ¡bitos: 2 â†’ 3 completados
- Programas: 0 â†’ 1 inscrito
- Tareas: 0 â†’ 1 completada

---

## ğŸ”„ Cambios TÃ©cnicos en el CÃ³digo

### Nuevas Variables Agregadas:

```javascript
// Tareas por programa
const PROGRAM_TASKS = {
    HYPERTENSION: [...],
    DIABETES: [...],
    OBESITY: [...],
    // etc.
};

// HÃ¡bitos universales
const UNIVERSAL_HABITS = [
    { id: 'uh_1', text: 'No consumo de tabaco', icon: 'ğŸš­', category: 'prevention' },
    // etc.
];
```

### Nuevas Propiedades en Pacientes:

```javascript
{
    id: 1,
    name: 'MarÃ­a GonzÃ¡lez',
    // ...propiedades existentes...
    completedTasks: [],          // IDs de tareas completadas
    completedHabits: ['uh_6', 'uh_7'], // IDs de hÃ¡bitos completados
    goals: [                      // Objetivos personalizados
        { id: 'g1', text: '...', progress: 30, target: 100 }
    ]
}
```

### Nuevas Funciones:

```javascript
toggleTask(taskId)           // Marcar/desmarcar tarea (+25 pts, +1% salud)
toggleHabit(habitId)         // Marcar/desmarcar hÃ¡bito (+15 pts, +2% salud)
getCategoryLabel(category)   // Etiqueta visual de categorÃ­a
renderUniversalHabits()      // Renderizar hÃ¡bitos saludables
renderGoals()                // Renderizar objetivos de salud
```

### Funciones Modificadas:

```javascript
renderTamagotchiDetail()     // Ahora llama a renderUniversalHabits() y renderGoals()
renderPrograms()             // Ahora muestra tareas cuando programa estÃ¡ inscrito
```

---

## ğŸ“Š MÃ©tricas de Engagement Esperadas

### Sin Tareas/HÃ¡bitos (Antes):
- Acciones por visita: 1-2 (solo inscripciÃ³n)
- Puntos promedio por sesiÃ³n: 100-200
- Tiempo en plataforma: 2-3 minutos

### Con Tareas/HÃ¡bitos (Ahora):
- Acciones por visita: **5-8** (inscripciÃ³n + tareas + hÃ¡bitos)
- Puntos promedio por sesiÃ³n: **200-400**
- Tiempo en plataforma: **5-8 minutos**

### CÃ¡lculo de Puntos MÃ¡ximos por SesiÃ³n:

**MarÃ­a (4 programas recomendados):**
- Inscripciones: 4 Ã— 100 = **400 pts**
- Tareas (promedio 3 por programa): 12 Ã— 25 = **300 pts**
- HÃ¡bitos (8 totales, 6 pendientes): 6 Ã— 15 = **90 pts**
- **Total mÃ¡ximo: 790 puntos en una sesiÃ³n**

**Impacto en salud:**
- HÃ¡bitos: 6 Ã— 2% = **+12%**
- Tareas: 12 Ã— 1% = **+12%**
- **Total: +24% salud** (de 65% a 89%)

---

## ğŸ¯ Valor Agregado para el Asegurador

### 1. Mayor Engagement:
- MÃ¡s interacciones por visita
- MÃ¡s tiempo en plataforma
- MÃ¡s datos de adherencia

### 2. Datos Granulares:
- No solo "estÃ¡ inscrito"
- Sino: "completÃ³ 8/12 tareas del programa"
- "Mantiene 6/8 hÃ¡bitos saludables"

### 3. PrevenciÃ³n Activa:
- HÃ¡bitos universales = prevenciÃ³n primaria
- Tareas de programa = prevenciÃ³n secundaria
- Objetivos = seguimiento de mejora

### 4. Incentivos Claros:
- Paciente ve **exactamente** quÃ© hacer
- Recompensa inmediata (puntos, salud)
- Progreso visual (barras, checkmarks)

---

## âœ… Checklist de Prueba

Antes de la demo:
- [ ] Abrir plataforma_integrada.html
- [ ] Ir a chat â†’ Seleccionar rol â†’ Dashboard
- [ ] Abrir MarÃ­a GonzÃ¡lez
- [ ] **NUEVO:** Ver secciÃ³n "HÃ¡bitos Saludables" arriba
- [ ] **NUEVO:** Marcar un hÃ¡bito y ver +15 pts
- [ ] **NUEVO:** Ver secciÃ³n "Objetivos de Salud"
- [ ] Ver barras de progreso de objetivos
- [ ] Inscribir en programa HipertensiÃ³n
- [ ] **NUEVO:** Ver aparecer 3 tareas del programa
- [ ] **NUEVO:** Marcar tarea y ver +25 pts
- [ ] Verificar que salud sube de 65% a 66%

---

## ğŸ Resumen de Mejoras

| Antes | Ahora |
|-------|-------|
| Solo programas | Programas + Tareas + HÃ¡bitos + Objetivos |
| 1-2 acciones | 5-8 acciones |
| 100-200 pts/sesiÃ³n | 200-400 pts/sesiÃ³n |
| Sin prevenciÃ³n | 8 hÃ¡bitos preventivos |
| Sin tracking | Tracking granular de tareas |
| Objetivos no visibles | Objetivos con barras de progreso |

---

Â¡PLATAFORMA ACTUALIZADA Y LISTA! ğŸš€
